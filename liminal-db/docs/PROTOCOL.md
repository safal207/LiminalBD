# Протокол взаимодействия LiminalDB v0.1

## Структуры ядра

### Impulse
- `kind: ImpulseKind` — тип импульса (`Query`, `Write`, `Affect`).
- `pattern: String` — путь/паттерн, разбиваемый на токены `/`, `:` и `.`.
- `strength: f32` — нормированная сила воздействия (0.0–1.0).
- `ttl_ms: u64` — время жизни импульса в миллисекундах.
- `tags: Vec<String>` — произвольные метки источника.

### Metrics
- `cells: usize` — количество живых клеток в поле.
- `sleeping_pct: f32` — доля клеток в состоянии сна.
- `avg_metabolism: f32` — среднее значение метаболизма.
- `avg_latency_ms: f32` — средняя задержка реакции (мс).

### Event
События публикуются в текстовом виде. Варианты для v0.1:
- `DIVIDE parent=nX -> child=nY (aff A->B)` — клетка делится, появляется потомок.
- `SLEEP nX` — клетка перешла в спящий режим.
- `DEAD nX` — клетка умерла и будет собрана GC.
- `IMPULSE ...` — краткий ответ клетки на импульс (используется CLI).

## CLI-команды
Команды принимаются через stdin. Сила (`strength`) по умолчанию `0.6` и ограничивается диапазоном `[0.0, 1.0]`.

```
q <pattern> [strength]  # создать Query-импульс
w <pattern> [strength]  # создать Write-импульс
a <pattern> [strength]  # создать Affect-импульс
```

Примеры:

```
a cpu/load 0.9
q color/red 0.7
w memory/seed 0.5
```

В будущей версии (v0.2) планируется CBOR-представление структур и событий.
